<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engagement</title>
    <link rel="stylesheet" href="form3.css">
</head>
<body>
    <header>
        <h1>Registration Form</h1>
    </header>
    
    <main>
        <div id="message"></div>
        <form action="process_form.html" method="post" id="myForm">
            <fieldset>
                <legend>Fill the blank</legend>
                <div class="form-group">
                    <label for="fname">First Name:</label>
                    <input class="text-field" type="text" id="first-name" name="first-name" required>
                </div>
                
                <div class="form-group">
                    <label for="lname">Last Name:</label>
                    <input class="text-field" type="text" id="lname" name="lname" required>
                </div>
                
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input class="text-field" type="text" id="username" name="username" required>
                </div>
    
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input class="password-field" type="password" id="password" name="password" required>
                </div>
    
                <div class="form-group">
                    <label for="address">Address:</label>
                    <textarea class="textarea-field" id="address" name="address"></textarea>
                </div>
    
                <div class="form-group checkbox-label">
                    <input class="checkbox-field" type="checkbox" id="terms" name="terms" required> 
                    <label for="terms">I agree to the terms and conditions</label>
                </div>
    
                <div class="form-group">
                    <label>Gender:</label>
                    <label><input class="radio-field" type="radio" name="gender" value="male" required> Male</label>
                    <label><input class="radio-field" type="radio" name="gender" value="female" required> Female</label>
                </div>
    
                <div class="form-group">
                    <label>Nationality:</label>
                    <label><input class="radio-field" type="radio" name="nationality" value="asian" required> Asian</label>
                    <label><input class="radio-field" type="radio" name="nationality" value="african" required> African</label>
                    <label><input class="radio-field" type="radio" name="nationality" value="european" required> European</label>
                    <label><input class="radio-field" type="radio" name="nationality" value="american" required> American</label>
                    <label><input class="radio-field" type="radio" name="nationality" value="australian_pacific_islander" required> Australian / Pacific Islander</label>
                </div>
    
                <div class="form-group">
                    <label for="state">State:</label>
                        <select class="select-field" id="state" name="state" required>
                            <option value="blank"></option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                </div>
                
    
                <div class="form-group">
                    <label for="dob">Date of Birth:</label>
                    <input class="date-field" type="date" id="dob" name="dob" required>
                </div>
    
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input class="email-field" type="email" id="email" name="email" required>
                </div>
    
                <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input class="phone-field" type="tel" id="phone" name="phone">
                </div>
    
                <button class="submit-button" type="submit">Submit</button>
            </fieldset>
        </form>
        <ol>
            <li> What is AJAX?
                <p> AJAX (Asynchronous JavaScript and XML) Commmunication with the data server </p>
            </li>
            <li> Why do you put your JS Code in a separate file?
                <p> I think this aims to organize and maintain our html code more concisely. Having a separate JS code will allow us to focus on each part such as html, js code, css, etc. So that we don't have just one code that is long and difficult to manage. </p>
            </li>
        </ol>
    </main>
    <footer>
        <p>&copy; 2024 Dandy Nugraha. 
            <br>All rights reserved.
        </p>
    </footer>
    <script>
        document.getElementById('myForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const firstName = document.getElementById('first-name').value;
            const lastName = document.getElementById('lname').value;
            const password = document.getElementById('password').value;
            const age = document.getElementById('age').value;

            if (!firstName || !lastName) {
                alert('First Name and Last Name cannot be blank, ');
                return; 
            }
            if (!age || age < 18) {
                alert('You must be 18 years or older to submit this form, ');
                return;
            }

            const formData = {
                firstName: firstName,
                lastName: lastName,
                password: document.getElementById('password').value,
                remember: document.getElementById('remember').checked,
                state: document.getElementById('state').value,
            };
            
            const xhr = new XMLHttpRequest();
            xhr.open("POST", "submit.js", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    const response = JSON.parse(xhr.responseText)
                    document.getElementById("message").innerHTML = response.message;
                    document.getElementById("myForm").innerHTML = "";
                } else if (xhr.readyState === 4) {
                    alert('Error submitting form.');
                }
            };
            xhr.send(JSON.stringify(formData));

            console.log(formData);

            alert('Success: ${firstName} ${lastName}');
        });
    </script>
</body>
</html>